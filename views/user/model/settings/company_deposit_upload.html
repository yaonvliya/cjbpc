<!--上传资料-->

<h4 class="child-page-title">上传资料</h4>

<form>
	<h3 class="upload-title">基础资料</h3>

	<div class="upload-container">
		<label>银行开户许可证：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="bankLicense" src="../../img/upload-default.png">
		</div>
	</div>

	<div class="upload-container">
		<label>法人身份证正面照：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="legalCertFacade" src="../../img/upload-default.png">
		</div>
	</div>

	<div class="upload-container">
		<label>法人身份证反面照：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="legalCertBack" src="../../img/upload-default.png">
		</div>
	</div>

	<h3 class="upload-title mt30-i">三证资料<a class="toggle-btn" href="javascript:;"><i class="iconfont icon-qiehuan"></i><span id="message">分开上传</span></a></h3>

	<div class="upload-container col">
		<label>三证合一证件照：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="threeCardsTogether" src="../../img/upload-default.png">
		</div>
	</div>

	<div class="upload-container sep">
		<label>普通营业执照：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="businessLicense" src="../../img/upload-default.png">
		</div>
	</div>

	<div class="upload-container sep">
		<label>组织机构代码：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="taxRegistration" src="../../img/upload-default.png">
		</div>
	</div>

	<div class="upload-container sep">
		<label>税务登记证：</label>
		<div class="upload-right">
			<img class="layui-upload-img pic" id="orgCode" src="../../img/upload-default.png">
		</div>
	</div>

	<input class="user-btn mt30 mb30" type="button" id="uploadSubmitBtn" value="提交" />

</form>

<script type="text/javascript" src="../../plugins/plupload-2.3.6/js/plupload.full.min.js"></script>
<script>
	var isToggle = true;
	var bankLicense,legalCertFacade,legalCertBack,threeCardsTogether,businessLicense,taxRegistration,orgCode;

	$(document).ready(function() {
		$(".toggle-btn").click(function () {
			if (isToggle) {
				$(".upload-container.col").hide();
				$(".upload-container.sep").show();
				isToggle = false;
			} else {
				$(".upload-container.sep").hide();
				$(".upload-container.col").show();
				isToggle = true;
			}
			$('#message').text(isToggle ? '分开上传': '合并上传');
		});

		$("#uploadSubmitBtn").click(function () {
			if(!bankLicense) {
				layer.msg("请上传银行开户许可证");
				return;
			}
			if(!legalCertFacade) {
				layer.msg("请上传法人身份证正面照");
				return;
			}
			if(!legalCertBack) {
				layer.msg("请上传法人身份证反面照");
				return;
			}
			if(isToggle){
				if(!threeCardsTogether) {
					layer.msg("请上传三证合一证件照");
					return;
				}
			} else {
				if(!businessLicense) {
					layer.msg("请上传普通营业执照");
					return;
				}
				if(!taxRegistration) {
					layer.msg("请上传税务登记证");
					return;
				}
				if(!orgCode) {
					layer.msg("请上传组织机构代码");
					return;
				}
			}
			var params = {
				bankLicense: bankLicense,
				legalCertFacade: legalCertFacade,
				legalCertBack: legalCertBack,
				threeCardsTogether: threeCardsTogether,
				businessLicense: businessLicense,
				taxRegistration: taxRegistration,
				orgCode: orgCode
			};
			var res = AjaxUtil.ajaxPost(userProfileApiUrl.enterpriseUploadPic, JSON.stringify(params));
			if(res){
				layer.msg("企业证件上传成功，请等待审核结果");
				window.setTimeout(function () {
					$_GLOBAL.jumpToUserIndex();
				}, 1000);
			}
		});

		PluploadUtil.upload('bankLicense', function (result) {
			bankLicense = result;
		});

		PluploadUtil.upload('legalCertFacade', function (result) {
			 legalCertFacade = result;
		});

		PluploadUtil.upload('legalCertBack', function (result) {
			legalCertBack = result;
		});

		PluploadUtil.upload('threeCardsTogether', function (result) {
			threeCardsTogether = result;
		});

		PluploadUtil.upload('businessLicense', function (result) {
			businessLicense = result;
		});

		PluploadUtil.upload('taxRegistration', function (result) {
			taxRegistration = result;
		});

		PluploadUtil.upload('orgCode', function (result) {
			orgCode = result;
		});
	});
</script>